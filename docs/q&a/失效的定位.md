### position定位失效

#### 问题概述

1. 列表页需要新增一个搜索结果为空时的UI样式，使用绝对定位布局了一个为空时的样式，但是当列表上拉加载的时候，样式失效

---

#### 源代码
```javascript
// html
 <div class="nohome">
   <img src="./img/1.jpg" width="40px" alt="">
   <p>暂无结果</p>
 </div>
// css
.no-result{
  position:absolute;
  top:0;
  right:0;
  left:0;
  bottom:0;
  display:flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

```

#### 解决

1. 页面表现为这段为空的样式消失在页面中，首先想到的是其他元素将这个div容器覆盖住了，遂将z-index设置为9999测试，发现依旧是无效
2. 第二个想到有可能是父元素高度塌陷，支撑不起来子元素，遂将父元素固定高度，依旧无效
3. 不断尝试复现场景，偶然发现，当列表上拉加载时，父元素新增了一个`transform`属性，经查阅资料，发现确实是这个属性，影响了子元素的固定定位。设置了`transform`的父元素，子元素将会基于这个父元素定位，不管父元素有没有设置`position:relative`属性

---

#### 实践

1. 背景的方式可以高保真完美的截取图片
2. img 的方式取决于图片的宽度，如果图片不是很宽，那么为了高保真，图片将会有留白；

```javascript
// html部分
 <p>背景</p>
 <div class="container bg"></div>

 <p>img-宽度短的图片</p>
 <div class="container cover">
   <img
     src="https://oscimg.oschina.net/oscnet/up-7f50677259757246fe66e88dbe9316747f6.JPEG"
     alt=""
   />
 </div>

 <p>img-宽度长的图片</p>
 <div class="container cover">
   <img
     src="https://oscimg.oschina.net/oscnet/up-2c7cfd3810847c7de4c9aa2fb6894a5613e.JPEG"
     alt=""
   />
 </div>

```

```javascript
// css部分
      .container {
        width: 100%;
        height: 120px;
        border: 1px solid;
      }
      .bg {
        background-image: url(https://oscimg.oschina.net/oscnet/up-7f50677259757246fe66e88dbe9316747f6.JPEG);
        background-repeat: no-repeat;

        /* 背景图片的位置 */
        background-position: 50%, 50%;

        /* 宽高比不变，铺满整个容器，多余的部分会被截掉 */
        background-size: cover;

        /* 宽高比不变，将图片缩放至完全显示在容器，会有留白 */
        /* background-size:contain; */
      }

      .cover {
        position: relative;
        width: 100%;
        height: 120px;
        overflow: hidden;
      }
      .cover img {
        height: 100%;

        width: auto;
        /* 只适合宽度比较长的图片，宽度小的图片会留白 */

        left: 50%;
        position: relative;
        -webkit-transform: translateX(-50%);
        -ms-transform: translateX(-50%);
        -moz-transform: translateX(-50%);
      }
```

---

#### 预览

![](https://oscimg.oschina.net/oscnet/up-523e54002f20471507e19ff784d91aff42f.png)

---

#### HTML直接插入图片和css使用背景图片的区别
1. 使用< />有一个好处，用户可以直接右键保存或者复制图片的链接
2. 图片作为背景，在图片没加载的时候或者加载失败的时候，不会有图片的占位标记
3. 网页加载过程中，以css背景图存在的图片会等到结构加载完成（网页内容全部显示）以后才开始加载。而HTML中的标签是网页内容的一部分，会在加载过程中加载（网会先加载标签的内容，再加载图片）。如果你引用了一个很大的图片，那么在这个图片下载完成之前，之后的内容都不会显示，而如果css来引入同样的图片，网页结构和内容加载完成之后，才开始加载背景图片，不会影响你浏览器的内容
4. 如果需要为不同屏幕分辨率展示不同的图像使用media查询时使用background-image

